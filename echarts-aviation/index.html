<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <!-- 引入 echarts.js -->
    <script src="dist/echarts.js"></script>
    <script src="map/js/china.js"></script>
</head>
<body>
    <!-- 为ECharts准备一个具备大小（宽高）的DOM -->
    <div id="main" style="height:640px; width: 900px; margin:0 auto;"></div>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));

        var geoCoordMap = {
            '北京': [117.2335, 40.1886],
            '广州': [113.3026, 23.3985],
            '上海': [121.804, 31.1465],
            '深圳': [113.8095, 22.6397],
            '成都': [103.9555, 30.5797],
            '昆明': [102.9335, 25.1044],
            '西安': [108.7526, 34.4385],
            '重庆': [106.6379, 29.722],
            '厦门': [118.1294, 24.5417],
            '乌鲁木齐': [87.4714, 43.9018],
            '大连': [121.5392, 38.9615],
            '杭州': [120.4343, 30.2382],
            '贵阳': [106.7964, 26.5442],
            '海口': [110.4577, 19.9405],
            '南京': [118.8669, 31.736],
            '哈尔滨': [126.2371, 45.6203],
            '三亚': [109.4084, 18.3052],
            '沈阳': [123.4906, 41.633],
            '呼和浩特': [111.8147, 40.8541],
            '青岛': [120.378, 36.2664],
            '天津': [117.3527, 39.1293],
            '武汉': [114.2053, 30.7727],
            '福州': [119.6657, 25.9338],
            '南宁': [108.1676, 22.6124],
            '郑州': [113.8402, 34.5267],
            '济南': [117.21, 36.8568],
            '太原': [112.6255, 37.7544],
            '温州': [120.8462, 27.9141],
            '桂林': [110.0424, 25.2186],
            '兰州': [103.613, 36.5079],
            '长沙': [113.2151, 28.2],
            '长春': [125.6908, 43.993],
            '银川': [106.3839, 38.322],
            '晋江': [118.5902, 24.8024],
            '合肥': [116.9645, 31.9883],
            '丽江': [100.247, 26.6702],
            '南昌': [115.9058, 28.8607],
            '宁波': [121.4575, 29.829],
            '烟台': [121.3721, 37.4066],
            '石家庄': [114.6907, 38.2803],
            '西宁': [113.3247, 23.0454],
            '宜昌': [111.4762, 30.5515],
            '北海': [109.2892, 21.543],
            '张家界': [110.4462, 29.1066],
            '海拉尔': [119.8169, 49.2114],
            '汕头': [116.6789, 23.386],
            '赣州': [114.7718, 25.8547],
            '无锡': [120.4281, 31.5047],
            '珠海': [113.3732, 22.0106],
            '九寨沟': [104.2413, 33.2539],
            '拉萨': [90.9564, 29.4954],
            '洛阳': [112.386, 34.7369],
            '威海': [122.2241, 37.1862],
            '西双版纳': [100.7636, 21.9738],
            '恩施': [109.4823, 30.3219],
            '邯郸': [114.4276, 36.5237],
            '黄岩': [121.4242, 28.5652],
            '绵阳': [104.7353, 31.4333],
            '义乌': [120.0285, 29.3431],
            '榆林': [109.5967, 38.3617],
            '运城': [111.036, 35.1137],
            '包头': [110.0013, 40.5638],
            '常德': [111.6381, 28.9244],
            '鄂尔多斯': [109.8655, 39.4948],
            '黄山': [118.2535, 29.7312],
            '嘉峪关': [98.3401, 39.8637],
            '景德镇': [117.1705, 29.3412],
            '临沂': [118.4075, 35.0487],
            '柳州': [109.3865, 24.2102],
            '牡丹江': [129.5618, 44.5222],
            '南通': [120.9712, 32.0729],
            '南阳': [112.6095, 32.9829],
            '武夷山': [117.9985, 27.7084],
            '徐州': [117.5497, 34.0605],
            '延吉': [129.4395, 42.8854],
            '舟山': [122.3554, 29.9357],
            '大庆': [125.0942, 46.6278],
            '黑河': [127.3062, 50.1769],
            '泸州': [105.3799, 28.8453],
            '衢州': [118.8966, 28.9709],
            '腾冲': [98.4603, 24.9438],
            '襄樊': [112.2871, 32.1516],
            '湛江': [110.4765, 21.243],
            '安庆': [117.0464, 30.5856],
            '百色': [106.9675, 23.7195],
            '常州': [119.7789, 31.9141],
            '赤峰': [118.8338, 42.1544],
            '达县': [104.0734, 30.6541],
            '大理': [100.2665, 25.6095],
            '大同': [113.3914, 40.0393],
            '敦煌': [94.8039, 40.1654],
            '济宁': [116.341, 35.293],
            '九江': [115.8027, 29.4838],
            '满洲里': [117.3317, 49.5706],
            '芒市': [98.5316, 24.4067],
            '秦皇岛': [119.3139, 39.6906],
            '万县': [107.7991, 30.6842],
            '乌海': [106.8042, 39.7927],
            '梧州': [111.2519, 23.4565],
            '西昌': [102.1844, 27.9825],
            '锡林浩特': [115.9606, 43.9176],
            '延安': [109.5521, 36.6391],
            '长治': [113.1219, 36.2467],
            '保山': [99.1649, 25.0544],
            '丹东': [124.2811, 40.0323],
            '东营': [118.782, 37.5048],
            '阜阳': [115.7384, 32.8795],
            '鸡西': [131.1768, 45.3062],
            '佳木斯': [130.4563, 46.8446],
            '锦州': [121.0672, 41.0942],
            '黎平': [109.1537, 26.3204],
            '连云港': [118.8764, 34.5662],
            '林芝': [94.3342, 29.3084],
            '南充': [106.162, 30.7906],
            '通辽': [122.2034, 43.5571],
            '铜仁': [109.3058, 27.8853],
            '潍坊': [119.1278, 36.6204],
            '乌兰浩特': [122.0019, 46.1936],
            '盐城': [120.2039, 33.431],
            '宜宾': [104.5427, 28.8039],
            '宜春': [128.8212, 47.7158],
            '芷江': [109.695, 27.4448],
            '阿尔泰': [87.0022, 48.2234],
            '阿克苏': [80.2895, 41.2614],
            '安康': [108.9347, 32.7098],
            '邦达': [97.1059, 30.5523],
            '朝阳': [120.4359, 41.5445],
            '迪庆': [99.6808, 27.7967],
            '佛山': [113.2563, 22.9386],
            '格尔木': [94.7895, 36.4039],
            '广元': [105.6896, 32.3923],
            '哈密': [121.3496, 31.1869],
            '汉中': [107.0085, 33.0673],
            '和田': [79.8725, 37.0403],
            '井冈山': [114.7323, 26.8609],
            '喀纳斯': [87.0022, 48.2234],
            '喀什': [76.0099, 39.5367],
            '康定': [101.7501, 30.1327],
            '克拉玛依': [84.9573, 45.4674],
            '库车': [82.984, 41.7168],
            '库尔勒': [86.1404, 41.6149],
            '连城': [116.7497, 25.7135],
            '临沧': [100.0254, 23.7439],
            '梅县': [116.1046, 24.266],
            '那拉提': [83.3769, 43.4315],
            '攀枝花': [101.7938, 26.5374],
            '齐齐哈尔': [123.9174, 47.2519],
            '思茅': [100.9617, 22.7965],
            '塔城': [83.3391, 46.67],
            '天水': [102.9335, 25.1044],
            '文山': [104.3314, 23.5662],
            '兴义': [104.9567, 25.0841],
            '伊宁': [81.3297, 43.9516],
            '永州': [111.6133, 26.345],
            '玉树': [97.0378, 32.84],
            '长白山': [127.7814, 42.0493],
        };

var BJData = [
    [{name: '北京'}, {name: '上海', value: 5775227}],
    [{name: '北京'}, {name: '深圳', value: 2687645}],
    [{name: '北京'}, {name: '广州', value: 2638698}],
    [{name: '北京'}, {name: '成都', value: 2573647}],
    [{name: '北京'}, {name: '杭州', value: 2240291}],
    [{name: '北京'}, {name: '西安', value: 2009183}],
    [{name: '北京'}, {name: '昆明', value: 1750259}],
    [{name: '北京'}, {name: '南京', value: 1584658}],
    [{name: '北京'}, {name: '重庆', value: 1434895}],
    [{name: '北京'}, {name: '哈尔滨', value: 1387862}],
    [{name: '北京'}, {name: '大连', value: 1345960}],
    [{name: '北京'}, {name: '长春', value: 1179034}],
    [{name: '北京'}, {name: '乌鲁木齐', value: 1124927}],
    [{name: '北京'}, {name: '武汉', value: 1122308}],
    [{name: '北京'}, {name: '沈阳', value: 1067332}],
    [{name: '北京'}, {name: '青岛', value: 979729}],
    [{name: '北京'}, {name: '呼和浩特', value: 935785}],
    [{name: '北京'}, {name: '长沙', value: 922934}],
    [{name: '北京'}, {name: '海口', value: 898425}],
    [{name: '北京'}, {name: '宁波', value: 895288}]
];

var SHData = [
    [{name: '上海'}, {name: '北京', value: 5775227}],
    [{name: '上海'}, {name: '深圳', value: 3167192}],
    [{name: '上海'}, {name: '广州', value: 2589628}],
    [{name: '上海'}, {name: '厦门', value: 1735349}],
    [{name: '上海'}, {name: '成都', value: 1622232}],
    [{name: '上海'}, {name: '青岛', value: 1428309}],
    [{name: '上海'}, {name: '重庆', value: 1321642}],
    [{name: '上海'}, {name: '大连', value: 1302686}],
    [{name: '上海'}, {name: '沈阳', value: 1272921}],
    [{name: '上海'}, {name: '哈尔滨', value: 1187954}],
    [{name: '上海'}, {name: '天津', value: 1038534}],
    [{name: '上海'}, {name: '三亚', value: 1031574}],
    [{name: '上海'}, {name: '福州', value: 963166}],
    [{name: '上海'}, {name: '温州', value: 942735}],
    [{name: '上海'}, {name: '武汉', value: 888915}],
    [{name: '上海'}, {name: '长沙', value: 843948}],
    [{name: '上海'}, {name: '昆明', value: 823675}],
    [{name: '上海'}, {name: '海口', value: 775093}],
    [{name: '上海'}, {name: '长春', value: 773294}],
    [{name: '上海'}, {name: '桂林', value: 768045}]
];

var GZData = [
    [{name: '广州'}, {name: '北京', value: 2638698}],
    [{name: '广州'}, {name: '上海', value: 2589628}],
    [{name: '广州'}, {name: '杭州', value: 1823110}],
    [{name: '广州'}, {name: '成都', value: 1642625}],
    [{name: '广州'}, {name: '海口', value: 1491995}],
    [{name: '广州'}, {name: '南京', value: 1197582}],
    [{name: '广州'}, {name: '重庆', value: 1100704}],
    [{name: '广州'}, {name: '三亚', value: 1073521}],
    [{name: '广州'}, {name: '哈尔滨', value: 784408}],
    [{name: '广州'}, {name: '武汉', value: 740962}],
    [{name: '广州'}, {name: '温州', value: 733012}],
    [{name: '广州'}, {name: '贵阳', value: 711277}],
    [{name: '广州'}, {name: '郑州', value: 705596}],
    [{name: '广州'}, {name: '桂林', value: 698432}],
    [{name: '广州'}, {name: '厦门', value: 657908}],
    [{name: '广州'}, {name: '昆明', value: 649502}],
    [{name: '广州'}, {name: '天津', value: 625901}],
    [{name: '广州'}, {name: '南昌', value: 613696}],
    [{name: '广州'}, {name: '沈阳', value: 601504}],
    [{name: '广州'}, {name: '长沙', value: 589458}]
];

var planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';

var convertData = function (data) {
    var res = [];
    for (var i = 0; i < data.length; i++) {
        var dataItem = data[i];
        var fromCoord = geoCoordMap[dataItem[0].name];
        var toCoord = geoCoordMap[dataItem[1].name];
        if (fromCoord && toCoord) {
            res.push([{
                coord: fromCoord
            }, {
                coord: toCoord
            }]);
        }
    }
    return res;
};

var color = ['#a6c84c', '#ffa022', '#46bee9'];
var series = [];
[['北京', BJData], ['上海', SHData], ['广州', GZData]].forEach(function (item, i) {
    series.push({
        name: item[0] + ' Top20',
        type: 'lines',
        zlevel: 1,
        effect: {
            show: true,
            period: 6,
            trailLength: 0.7,
            color: '#fff',
            symbolSize: 3
        },
        lineStyle: {
            normal: {
                color: color[i],
                width: 0,
                curveness: 0.2
            }
        },
        data: convertData(item[1])
    },
    {
        name: item[0] + ' Top20',
        type: 'lines',
        zlevel: 2,
        effect: {
            show: true,
            period: 6,
            trailLength: 0,
            symbol: planePath,
            symbolSize: 15
        },
        lineStyle: {
            normal: {
                color: color[i],
                width: 1,
                opacity: 0.4,
                curveness: 0.2
            }
        },
        data: convertData(item[1])
    },
    {
        name: item[0] + ' Top20',
        type: 'effectScatter',
        coordinateSystem: 'geo',
        zlevel: 2,
        rippleEffect: {
            brushType: 'stroke'
        },
        label: {
            normal: {
                show: true,
                position: 'right',
                formatter: '{b}'
            }
        },
        symbolSize: function (val) {
            return val[2] / 500000;
        },
        itemStyle: {
            normal: {
                color: color[i]
            }
        },
        data: item[1].map(function (dataItem) {
            return {
                name: dataItem[1].name,
                value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])
            };
        })
    });
});

option = {
    backgroundColor: '#404a59',
    title : {
        text: '2009年国内航线旅客运输量',
        subtext: '数据来源：中国民航统计年鉴2010',
        left: 'center',
        textStyle : {
            color: '#fff'
        }
    },
    tooltip : {
        trigger: 'item'
    },
    legend: {
        orient: 'vertical',
        top: 'bottom',
        left: 'right',
        data:['北京 Top20', '上海 Top20', '广州 Top20'],
        textStyle: {
            color: '#fff'
        },
        selectedMode: 'single'
    },
    geo: {
        map: 'china',
        label: {
            emphasis: {
                show: false
            }
        },
        roam: true,
        itemStyle: {
            normal: {
                areaColor: '#323c48',
                borderColor: '#404a59'
            },
            emphasis: {
                areaColor: '#2a333d'
            }
        }
    },
    toolbox: {
        show: true,
        orient: 'vertical',
        x: 'right',
        y: 'center',
        feature: {
            mark: {
                show: true
            },
            dataView: {
                show: true,
                readOnly: false
            },
            restore: {
                show: true
            },
            saveAsImage: {
                show: true
            }
        }
    },
    dataRange: {
        min: 550000,
        max: 6000000,
        y: '60%',
        calculable: true,
        color: ['#ff3333', 'orange', 'yellow', 'lime', 'aqua']
    },
    series: series
};

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
    </script>
</body>
</html>